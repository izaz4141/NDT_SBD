import{l as S,i as k,r as i,m as L,q,o as a,c as l,b as e,F as $,g as P,t as d,w as V,v as I,n as T,d as m,f as N,A as D,I as U,x as B,s as z,k as b,y as A,z as H,B as R}from"./index.470da819.js";import{_ as G}from"./TextPopup.27959c24.js";const J={class:"my-6"},K={class:"flex flex-col justify-center m-auto overflow-auto"},Q=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[10vw]",scope:"col"},"Pemesan"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),W={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},X=["onClick"],Y={class:"w-[20vw] overflow-auto"},Z={class:"w-[10vw] overflow-auto"},ee={class:"w-[10vw] overflow-auto"},te={key:0},se={key:1},ae={class:"w-[10vw] overflow-auto"},oe={class:"w-[20vw] overflow-auto"},le={key:0},ne=["value"],ce={key:1},re={class:"w-[10vw] justify-center flex items-center overflow-auto"},de=["onClick"],ie={class:"w-[15vw] overflow-auto"},ue={class:"w-[15vw] overflow-auto"},ve={class:"w-[20vw]"},_e={class:"flex gap-2 justify-center items-center"},pe=["onClick"],we=["onClick"],he=["onClick"],ye={__name:"TabelDaftarPesanan",setup(E){const C=S(),v=k("currentColor"),_=k("user"),p=k("data_pesanan"),n=i({}),w=i(""),h=i(""),g=i([]),y=i({});L("popupOpen",y);const c=async()=>{try{const t=await b.get("/get_karyawan");g.value=t.data}catch(t){console.log(t)}},f=t=>{n.value={},n.value[t.id]=!0,w.value=t.harga,h.value=t.karyawan.id},u=()=>{n.value={}},x=async t=>{try{await b.post("/edit_pesanan",{pesanan_id:t,harga:w.value,karyawan_id:h.value}),await j(),n.value={}}catch(r){console.log(r)}},F=async t=>{try{await b.post("/cancel_order",{order_id:t}),await j()}catch(r){console.log(r)}},M=t=>{y.value={},y.value[t]=!0},j=async()=>{if(_.value)try{const t=await b.post("/pemesanan_list",{author_level:_.value.author_level});p.value=t.data}catch(t){console.log(t)}else C.push("/")},O=t=>{navigator.clipboard.writeText(t)};return q(()=>{c()}),(t,r)=>(a(),l("div",J,[e("table",K,[Q,e("tbody",null,[(a(!0),l($,null,P(m(p),s=>(a(),l("tr",{key:s.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",W,[e("button",{onClick:o=>O(s.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,X)]),e("td",Y,d(s.lokasi),1),e("td",Z,d(s.layanan),1),e("td",ee,[n.value[s.id]?(a(),l("div",te,[V(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=o=>w.value=o),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:T({borderColor:m(v)})},null,4),[[I,w.value]])])):(a(),l("div",se,d(s.harga),1))]),e("td",ae,d(s.pelanggan.name),1),e("td",oe,[n.value[s.id]?(a(),l("div",le,[V(e("select",{class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1","onUpdate:modelValue":r[1]||(r[1]=o=>h.value=o)},[(a(!0),l($,null,P(g.value,o=>(a(),l("option",{value:o.id},d(o.name),9,ne))),256))],512),[[N,h.value]])])):(a(),l("div",ce,d(s.karyawan.map(o=>o.name).join(", ")),1))]),e("td",re,[e("button",{onClick:o=>M(s.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,de)]),e("td",ie,d(s.tanggal_pemesanan),1),e("td",ue,d(s.tanggal_selesai),1),e("td",ve,[e("div",_e,[n.value[s.id]?(a(),l("button",{key:0,onClick:o=>x(s.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Save ",8,pe)):(a(),l("button",{key:1,onClick:o=>f(s),class:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-t"}," Edit ",8,we)),e("button",{onClick:o=>F(s.id),class:"bg-red-500 hover:bg-red-400 text-white font-bold py-1 px-4 rounded-t"}," Delete ",8,he),n.value[s.id]?(a(),l("button",{key:2,onClick:u,class:"text-3xl rounded-full h-min w-min relative right-2"},[D(m(U),{icon:"ic:twotone-cancel"})])):B("",!0)])]),y.value[s.id]?(a(),z(G,{key:0,title:"Deskripsi",isi:s.deskripsi},null,8,["isi"])):B("",!0)]))),128))])])]))}},fe={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},ge=e("h1",null,"Daftar Pesanan",-1),xe={__name:"DaftarPesanan",setup(E){const C=S(),v=i([]),_=i([]),p=i(""),n=k("user"),w=k("currentColor");L("data_pesanan",_);const h=(c,f)=>c.filter(u=>Object.keys(u).some(x=>typeof u[x]=="string"&&u[x].toLowerCase().includes(f.toLowerCase()))),g=()=>{const c=h(v.value,p.value);_.value=c},y=async()=>{if(n.value)try{const c=await b.post("/pemesanan_list",{author_level:n.value.author_level});v.value=c.data}catch(c){console.log(c)}else C.push("/")};return A(async()=>{await y(),_.value=v.value}),H(v,()=>{g()},{deep:!0}),(c,f)=>(a(),l("div",fe,[ge,D(R,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=u=>p.value=u),inputClass:"text-sm md:text-base",submitFunc:g,class:"m-auto my-4",style:T({borderColor:m(w)})},null,8,["modelValue","style"]),D(ye)]))}};export{xe as default};
