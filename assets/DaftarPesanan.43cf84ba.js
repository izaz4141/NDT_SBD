import{i as g,r as i,l as S,m as M,o as a,c as l,b as e,F as $,g as P,t as d,w as V,v as O,n as L,d as x,f as q,A as D,I,s as B,q as N,k as f,x as U,y as z,z as A,B as H}from"./index.3a153a27.js";import{_ as R}from"./TextPopup.8e17355f.js";const G={class:"my-6"},J={class:"flex flex-col justify-center m-auto overflow-auto"},K=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[10vw]",scope:"col"},"Pemesan"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),Q={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},W=["onClick"],X={class:"w-[20vw] overflow-auto"},Y={class:"w-[10vw] overflow-auto"},Z={class:"w-[10vw] overflow-auto"},ee={key:0},te={key:1},se={class:"w-[10vw] overflow-auto"},ae={class:"w-[20vw] overflow-auto"},oe={key:0},le=["value"],ne={key:1},ce={class:"w-[10vw] justify-center flex items-center overflow-auto"},re=["onClick"],de={class:"w-[15vw] overflow-auto"},ie={class:"w-[15vw] overflow-auto"},ue={class:"w-[20vw]"},ve={class:"flex gap-2 justify-center items-center"},_e=["onClick"],pe=["onClick"],we=["onClick"],he={__name:"TabelDaftarPesanan",setup(T){const m=g("currentColor"),u=g("user"),w=g("data_pesanan"),n=i({}),v=i(""),h=i(""),b=i([]),_=i({});S("popupOpen",_);const C=async()=>{try{const t=await f.get("/get_karyawan");b.value=t.data}catch(t){console.log(t)}},c=t=>{n.value={},n.value[t.id]=!0,v.value=t.harga,h.value=t.karyawan.id},y=()=>{n.value={}},p=async t=>{try{await f.post("/edit_pesanan",{pesanan_id:t,harga:v.value,karyawan_id:h.value}),await j(),n.value={}}catch(r){console.log(r)}},k=async t=>{try{await f.post("/cancel_order",{order_id:t}),await j()}catch(r){console.log(r)}},E=t=>{_.value={},_.value[t]=!0},j=async()=>{if(u.value)try{const t=await f.post("/pemesanan_list",{author_level:u.value.author_level});w.value=t.data}catch(t){console.log(t)}else router.push("/")},F=t=>{navigator.clipboard.writeText(t)};return M(()=>{C()}),(t,r)=>(a(),l("div",G,[e("table",J,[K,e("tbody",null,[(a(!0),l($,null,P(x(w),s=>(a(),l("tr",{key:s.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",Q,[e("button",{onClick:o=>F(s.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,W)]),e("td",X,d(s.lokasi),1),e("td",Y,d(s.layanan),1),e("td",Z,[n.value[s.id]?(a(),l("div",ee,[V(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=o=>v.value=o),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:L({borderColor:x(m)})},null,4),[[O,v.value]])])):(a(),l("div",te,d(s.harga),1))]),e("td",se,d(s.pelanggan.name),1),e("td",ae,[n.value[s.id]?(a(),l("div",oe,[V(e("select",{class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1","onUpdate:modelValue":r[1]||(r[1]=o=>h.value=o)},[(a(!0),l($,null,P(b.value,o=>(a(),l("option",{value:o.id},d(o.name),9,le))),256))],512),[[q,h.value]])])):(a(),l("div",ne,d(s.karyawan.map(o=>o.name).join(", ")),1))]),e("td",ce,[e("button",{onClick:o=>E(s.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,re)]),e("td",de,d(s.tanggal_pemesanan),1),e("td",ie,d(s.tanggal_selesai),1),e("td",ue,[e("div",ve,[n.value[s.id]?(a(),l("button",{key:0,onClick:o=>p(s.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Save ",8,_e)):(a(),l("button",{key:1,onClick:o=>c(s),class:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-t"}," Edit ",8,pe)),e("button",{onClick:o=>k(s.id),class:"bg-red-500 hover:bg-red-400 text-white font-bold py-1 px-4 rounded-t"}," Delete ",8,we),n.value[s.id]?(a(),l("button",{key:2,onClick:y,class:"text-3xl rounded-full h-min w-min relative right-2"},[D(x(I),{icon:"ic:twotone-cancel"})])):B("",!0)])]),_.value[s.id]?(a(),N(R,{key:0,title:"Deskripsi",isi:s.deskripsi},null,8,["isi"])):B("",!0)]))),128))])])]))}},ye={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},fe=e("h1",null,"Daftar Pesanan",-1),ke={__name:"DaftarPesanan",setup(T){const m=U(),u=i([]),w=i([]),n=i(""),v=g("user"),h=g("currentColor");S("data_pesanan",w);const b=(c,y)=>c.filter(p=>Object.keys(p).some(k=>typeof p[k]=="string"&&p[k].toLowerCase().includes(y.toLowerCase()))),_=()=>{const c=b(u.value,n.value);w.value=c},C=async()=>{if(v.value)try{const c=await f.post("/pemesanan_list",{author_level:v.value.author_level});u.value=c.data}catch(c){console.log(c)}else m.push("/")};return z(async()=>{await C(),w.value=u.value}),A(u,()=>{_()},{deep:!0}),(c,y)=>(a(),l("div",ye,[fe,D(H,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=p=>n.value=p),inputClass:"text-sm md:text-base",submitFunc:_,class:"m-auto my-4",style:L({borderColor:x(h)})},null,8,["modelValue","style"]),D(he)]))}};export{ke as default};
