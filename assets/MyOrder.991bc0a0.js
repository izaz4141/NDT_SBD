import{l as x,i as h,r as u,m as b,q as O,o as i,c as v,b as e,F as $,g as B,t as r,s as V,x as D,d as C,k as p,y as L,z as T,A as k,n as F,B as M}from"./index.470da819.js";import{_ as P}from"./TextPopup.27959c24.js";const q={class:"my-6"},N={class:"flex flex-col justify-center m-auto overflow-auto"},S=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Estimasi Pengerjaan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),z={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},A=["onClick"],E={class:"w-[20vw] overflow-auto"},H={class:"w-[10vw] overflow-auto"},I={class:"w-[10vw] overflow-auto"},R={class:"w-[20vw] overflow-auto"},U={class:"w-[10vw] justify-center flex items-center overflow-auto"},G=["onClick"],J={class:"w-[15vw] overflow-auto"},K={class:"w-[15vw] overflow-auto"},Q={class:"w-[15vw] overflow-auto"},W={class:"w-[20vw]"},X={class:"flex gap-2 justify-center items-center"},Y=["onClick"],Z={__name:"TabelMyOrder",setup(j){const y=x(),l=h("user"),n=h("data_myOrder"),d=u([]),c=u({});b("popupOpen",c);const f=async()=>{try{const s=await p.get("/get_karyawan");d.value=s.data}catch(s){console.log(s)}},g=async s=>{try{await p.post("/cancel_order",{order_id:s}),await m()}catch(a){console.log(a)}},_=s=>{c.value={},c.value[s]=!0},m=async()=>{if(l.value)try{const s=await p.post("/your_order_list",{user_id:l.value.id});n.value=s.data}catch(s){console.log(s)}else y.push("/")},o=s=>{navigator.clipboard.writeText(s)};return O(()=>{f()}),(s,a)=>(i(),v("div",q,[e("table",N,[S,e("tbody",null,[(i(!0),v($,null,B(C(n),t=>(i(),v("tr",{key:t.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",z,[e("button",{onClick:w=>o(t.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,A)]),e("td",E,r(t.lokasi),1),e("td",H,r(t.layanan),1),e("td",I,[e("div",null,r(t.harga),1)]),e("td",R,[e("div",null,r(t.karyawan.map(w=>w.name).join(", ")),1)]),e("td",U,[e("button",{onClick:w=>_(t.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,G)]),e("td",J,r(t.tanggal_pemesanan),1),e("td",K,r(t.estimasi_pengerjaan),1),e("td",Q,r(t.tanggal_selesai),1),e("td",W,[e("div",X,[e("button",{onClick:w=>g(t.id),class:"bg-red-500 hover:bg-red-400 text-white font-bold py-1 px-4 rounded-t"}," Cancel Order ",8,Y)])]),c.value[t.id]?(i(),V(P,{key:0,title:"Deskripsi",isi:t.deskripsi},null,8,["isi"])):D("",!0)]))),128))])])]))}},ee={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},se=e("h1",null,"Transaksi",-1),ae={__name:"MyOrder",setup(j){const y=x(),l=u([]),n=u([]),d=u(""),c=h("user"),f=h("currentColor");b("data_myOrder",n);const g=(o,s)=>o.filter(a=>Object.keys(a).some(t=>typeof a[t]=="string"&&a[t].toLowerCase().includes(s.toLowerCase()))),_=()=>{const o=g(l.value,d.value);n.value=o},m=async()=>{if(c.value)try{const o=await p.post("/your_order_list",{user_id:c.value.id});l.value=o.data}catch(o){console.log(o)}else y.push("/")};return L(async()=>{await m(),n.value=l.value}),T(l,()=>{_()},{deep:!0}),(o,s)=>(i(),v("div",ee,[se,k(M,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a),inputClass:"text-sm md:text-base",submitFunc:_,class:"m-auto my-4",style:F({borderColor:C(f)})},null,8,["modelValue","style"]),k(Z)]))}};export{ae as default};
