import{i as b,r as v,l as S,m as L,o as a,c as o,b as e,F as T,g as q,t as u,w as B,v as D,n as j,d as g,A as $,I,s as P,q as K,k as f,x as M,y as N,z as U,B as z}from"./index.3a153a27.js";import{_ as A}from"./TextPopup.8e17355f.js";const H={class:"my-6"},R={class:"flex flex-col justify-center m-auto overflow-auto"},G=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[10vw]",scope:"col"},"Pemesan"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Estimasi Pengerjaan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),J={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},Q=["onClick"],W={class:"w-[20vw] overflow-auto"},X={class:"w-[10vw] overflow-auto"},Y={class:"w-[10vw] overflow-auto"},Z={key:0},ee={key:1},te={class:"w-[10vw] overflow-auto"},se={class:"w-[20vw] overflow-auto"},ae={class:"w-[10vw] justify-center flex items-center overflow-auto"},oe=["onClick"],le={class:"w-[15vw] overflow-auto"},ne={class:"w-[15vw] overflow-auto"},re={key:0},ce={key:1},de={class:"w-[15vw] overflow-auto"},ie={class:"w-[20vw]"},ue={class:"flex gap-2 justify-center items-center"},ve=["onClick"],_e=["onClick"],pe={key:2,class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t cursor-not-allowed brightness-50",disabled:""},we=["onClick"],he={__name:"TabelKerjaan",setup(E){const k=b("currentColor"),c=b("user"),w=b("data_myOrder"),l=v({}),d=v(""),h=v(""),m=v([]),_=v({});S("popupOpen",_);const C=async()=>{try{const s=await f.get("/get_karyawan");m.value=s.data}catch(s){console.log(s)}},n=s=>{l.value={},l.value[s.id]=!0,d.value=s.harga,h.value=s.estimasi_pengerjaan},y=()=>{l.value={}},p=async s=>{try{await f.post("/edit_my_kerja",{pesanan_id:s,harga:d.value,estimasi_pengerjaan:h.value}),await V(),l.value={}}catch(i){console.log(i)}},x=async s=>{try{await f.post("/selesai_kerja",{pesanan_id:s}),await V()}catch(i){console.log(i)}},O=s=>{_.value={},_.value[s]=!0},V=async()=>{if(c.value)try{const s=await f.post("/get_kerjaan",{user_id:c.value.id,author_level:c.value.author_level});w.value=s.data}catch(s){console.log(s)}else router.push("/")},F=s=>{navigator.clipboard.writeText(s)};return L(()=>{C()}),(s,i)=>(a(),o("div",H,[e("table",R,[G,e("tbody",null,[(a(!0),o(T,null,q(g(w),t=>(a(),o("tr",{key:t.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",J,[e("button",{onClick:r=>F(t.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,Q)]),e("td",W,u(t.lokasi),1),e("td",X,u(t.layanan),1),e("td",Y,[l.value[t.id]?(a(),o("div",Z,[B(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>d.value=r),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:j({borderColor:g(k)})},null,4),[[D,d.value]])])):(a(),o("div",ee,u(t.harga),1))]),e("td",te,u(t.pelanggan.name),1),e("td",se,[e("div",null,u(t.karyawan.map(r=>r.name).join(", ")),1)]),e("td",ae,[e("button",{onClick:r=>O(t.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,oe)]),e("td",le,u(t.tanggal_pemesanan),1),e("td",ne,[l.value[t.id]?(a(),o("div",re,[B(e("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=r=>h.value=r),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:j({borderColor:g(k)})},null,4),[[D,h.value]])])):(a(),o("div",ce,u(t.estimasi_pengerjaan),1))]),e("td",de,u(t.tanggal_selesai),1),e("td",ie,[e("div",ue,[l.value[t.id]?(a(),o("button",{key:0,onClick:r=>p(t.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Save ",8,ve)):(a(),o("button",{key:1,onClick:r=>n(t),class:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-t"}," Edit ",8,_e)),t.tanggal_selesai?(a(),o("button",pe," Selesai ")):(a(),o("button",{key:3,onClick:r=>x(t.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Selesaikan ",8,we)),l.value[t.id]?(a(),o("button",{key:4,onClick:y,class:"text-3xl rounded-full h-min w-min relative right-2"},[$(g(I),{icon:"ic:twotone-cancel"})])):P("",!0)])]),_.value[t.id]?(a(),K(A,{key:0,title:"Deskripsi",isi:t.deskripsi},null,8,["isi"])):P("",!0)]))),128))])])]))}},ye={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},ge=e("h1",null,"Kerjaan",-1),ke={__name:"DaftarKerja",setup(E){const k=M(),c=v([]),w=v([]),l=v(""),d=b("user"),h=b("currentColor");S("data_myOrder",w);const m=(n,y)=>n.filter(p=>Object.keys(p).some(x=>typeof p[x]=="string"&&p[x].toLowerCase().includes(y.toLowerCase()))),_=()=>{const n=m(c.value,l.value);w.value=n},C=async()=>{if(d.value)try{const n=await f.post("/get_kerjaan",{user_id:d.value.id,author_level:d.value.author_level});c.value=n.data}catch(n){console.log(n)}else k.push("/")};return N(async()=>{await C(),w.value=c.value}),U(c,()=>{_()},{deep:!0}),(n,y)=>(a(),o("div",ye,[ge,$(z,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:l.value,"onUpdate:modelValue":y[0]||(y[0]=p=>l.value=p),inputClass:"text-sm md:text-base",submitFunc:_,class:"m-auto my-4",style:j({borderColor:g(h)})},null,8,["modelValue","style"]),$(he)]))}};export{ke as default};
