import{i as h,r as i,l as k,m as C,o as d,c as v,b as e,F as j,g as O,t as c,q as $,s as B,d as x,k as p,x as V,y as D,z as L,A as m,n as T,B as F}from"./index.3a153a27.js";import{_ as M}from"./TextPopup.8e17355f.js";const P={class:"my-6"},q={class:"flex flex-col justify-center m-auto overflow-auto"},N=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Estimasi Pengerjaan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),S={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},z=["onClick"],A={class:"w-[20vw] overflow-auto"},E={class:"w-[10vw] overflow-auto"},H={class:"w-[10vw] overflow-auto"},I={class:"w-[20vw] overflow-auto"},R={class:"w-[10vw] justify-center flex items-center overflow-auto"},U=["onClick"],G={class:"w-[15vw] overflow-auto"},J={class:"w-[15vw] overflow-auto"},K={class:"w-[15vw] overflow-auto"},Q={class:"w-[20vw]"},W={class:"flex gap-2 justify-center items-center"},X=["onClick"],Y={__name:"TabelMyOrder",setup(b){const u=h("user"),a=h("data_myOrder"),n=i([]),o=i({});k("popupOpen",o);const _=async()=>{try{const s=await p.get("/get_karyawan");n.value=s.data}catch(s){console.log(s)}},y=async s=>{try{await p.post("/cancel_order",{order_id:s}),await w()}catch(l){console.log(l)}},f=s=>{o.value={},o.value[s]=!0},w=async()=>{if(u.value)try{const s=await p.post("/your_order_list",{user_id:u.value.id});a.value=s.data}catch(s){console.log(s)}else router.push("/")},g=s=>{navigator.clipboard.writeText(s)};return C(()=>{_()}),(s,l)=>(d(),v("div",P,[e("table",q,[N,e("tbody",null,[(d(!0),v(j,null,O(x(a),t=>(d(),v("tr",{key:t.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",S,[e("button",{onClick:r=>g(t.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,z)]),e("td",A,c(t.lokasi),1),e("td",E,c(t.layanan),1),e("td",H,[e("div",null,c(t.harga),1)]),e("td",I,[e("div",null,c(t.karyawan.map(r=>r.name).join(", ")),1)]),e("td",R,[e("button",{onClick:r=>f(t.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,U)]),e("td",G,c(t.tanggal_pemesanan),1),e("td",J,c(t.estimasi_pengerjaan),1),e("td",K,c(t.tanggal_selesai),1),e("td",Q,[e("div",W,[e("button",{onClick:r=>y(t.id),class:"bg-red-500 hover:bg-red-400 text-white font-bold py-1 px-4 rounded-t"}," Cancel Order ",8,X)])]),o.value[t.id]?(d(),$(M,{key:0,title:"Deskripsi",isi:t.deskripsi},null,8,["isi"])):B("",!0)]))),128))])])]))}},Z={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},ee=e("h1",null,"Transaksi",-1),oe={__name:"MyOrder",setup(b){const u=V(),a=i([]),n=i([]),o=i(""),_=h("user"),y=h("currentColor");k("data_myOrder",n);const f=(s,l)=>s.filter(t=>Object.keys(t).some(r=>typeof t[r]=="string"&&t[r].toLowerCase().includes(l.toLowerCase()))),w=()=>{const s=f(a.value,o.value);n.value=s},g=async()=>{if(_.value)try{const s=await p.post("/your_order_list",{user_id:_.value.id});a.value=s.data}catch(s){console.log(s)}else u.push("/")};return D(async()=>{await g(),n.value=a.value}),L(a,()=>{w()},{deep:!0}),(s,l)=>(d(),v("div",Z,[ee,m(F,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),inputClass:"text-sm md:text-base",submitFunc:w,class:"m-auto my-4",style:T({borderColor:x(y)})},null,8,["modelValue","style"]),m(Y)]))}};export{oe as default};
