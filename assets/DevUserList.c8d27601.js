import{l as S,i as b,r as i,q as I,o,c as l,b as e,F as C,g as D,t as d,w as V,v as M,n as A,d as j,f as U,A as $,I as q,x as z,k as m,m as O,y as K,z as R,B as G}from"./index.28155aa0.js";const H={class:"my-6"},J={class:"flex flex-col justify-center m-auto"},Q=e("thead",{class:"w-full"},[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[10vw]",scope:"col"},"Nama"),e("th",{class:"w-[10vw]",scope:"col"},"Email"),e("th",{class:"w-[9vw]",scope:"col"},"Author Level"),e("th",{class:"w-[15vw]",scope:"col"},"Pemesanan"),e("th",{class:"w-[10vw]",scope:"col"},"Departemen"),e("th",{class:"w-[15vw]",scope:"col"},"Peminjaman"),e("th",{class:"w-[15vw]",scope:"col"},"Pekerjaan"),e("th",{class:"w-[10vw]",scope:"col"},"Tanggal Daftar"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),W={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},X=["onClick"],Y={class:"w-[10vw] overflow-auto"},Z={class:"w-[10vw] overflow-auto"},ee={class:"w-[9vw] justify-center flex items-center overflow-auto"},te={key:0},se={key:1},ae={class:"w-[15vw] justify-center flex items-center overflow-auto"},oe={class:"w-[10vw] justify-center flex items-center overflow-auto"},le={key:0},ne=["value"],re={key:1},ce={class:"w-[15vw] justify-center flex items-center overflow-auto"},ue={class:"w-[15vw] justify-center flex items-center overflow-auto"},de={key:0},ie=["value"],ve={key:1},_e={class:"w-[10vw] justify-center flex items-center overflow-auto"},pe={class:"w-[20vw] justify-center flex items-center overflow-auto"},he={class:"flex gap-2 justify-center items-center"},we=["onClick"],ye=["onClick"],fe=["onClick"],me={__name:"TabelDaftarUsers",setup(E){const x=S(),h=b("currentColor"),u=b("user"),w=b("data_dev_users"),n=i({}),y=i(""),_=i(""),v=i(""),k=i([]),c=i([]);function f(t){const r=["0","1","2","3","4","5","6","7","8","9","+"],a=t.key;r.includes(a)||t.preventDefault()}const p=t=>{n.value={},n.value[t.id]=!0,y.value=t.author_level,t.pekerjaan.id?v.value=t.pekerjaan.id:v.value="bukan",t.departemen?_.value=t.departemen.id:_.value="bukan"},g=()=>{n.value={}},L=async t=>{try{await m.post("/edit_user_dev",{user_id:t,dev_author_level:u.value.author_level,author_level:parseInt(y.value),departemen_id:_.value,pekerjaan_id:v.value}),await B(),n.value={}}catch(r){console.log(r)}},N=async t=>{try{await m.post("/remove_user",{user_id:t,author_level:u.value.author_level}),await B()}catch(r){console.log(r)}},B=async()=>{if(u.value)try{const t=await m.post("/dev_users_list",{author_level:u.value.author_level});w.value=t.data}catch(t){console.log(t)}else x.push("/")},P=async()=>{if(u.value)try{const t=await m.post("/pemesanan_list",{author_level:u.value.author_level});k.value=t.data}catch(t){console.log(t)}else x.push("/")},T=async()=>{try{const t=await m.get("/departemen_list");c.value=t.data}catch(t){console.log(t)}},F=t=>{navigator.clipboard.writeText(t)};return I(async()=>{await P(),await T()}),(t,r)=>(o(),l("div",H,[e("table",J,[Q,e("tbody",null,[(o(!0),l(C,null,D(j(w),a=>(o(),l("tr",{key:a.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",W,[e("button",{onClick:s=>F(a.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,X)]),e("td",Y,[e("div",null,d(a.name),1)]),e("td",Z,[e("div",null,d(a.email),1)]),e("td",ee,[n.value[a.id]?(o(),l("div",te,[V(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>y.value=s),class:"w-[6vw] px-[1vw] py-1 bg-white dark:bg-gray-900 rounded-md border-1 text-center",style:A({borderColor:j(h)}),onKeypress:f},null,36),[[M,y.value]])])):(o(),l("div",se,d(a.author_level),1))]),e("td",ae,[e("div",null,d(a.pesanan.map(s=>s.layanan).join(", ")),1)]),e("td",oe,[n.value[a.id]?(o(),l("div",le,[V(e("select",{class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1","onUpdate:modelValue":r[1]||(r[1]=s=>_.value=s)},[(o(!0),l(C,null,D(c.value,s=>(o(),l("option",{value:s.id},d(s.name),9,ne))),256))],512),[[U,_.value]])])):(o(),l("div",re,d(a.departemen?a.departemen.name:""),1))]),e("td",ce,[e("div",null,d(a.meminjam.filter(s=>s.item.name!="Barang Telah Dihapus").map(s=>s.item.name).join(", ")),1)]),e("td",ue,[n.value[a.id]?(o(),l("div",de,[V(e("select",{class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1","onUpdate:modelValue":r[2]||(r[2]=s=>v.value=s)},[(o(!0),l(C,null,D(k.value,s=>(o(),l("option",{value:s.id},d(s.lokasi),9,ie))),256))],512),[[U,v.value]])])):(o(),l("div",ve,d(a.pekerjaan.map(s=>s.lokasi).join(", ")),1))]),e("td",_e,d(a.date_added),1),e("td",pe,[e("div",he,[n.value[a.id]?(o(),l("button",{key:0,onClick:s=>L(a.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Save ",8,we)):(o(),l("button",{key:1,onClick:s=>p(a),class:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-t"}," Edit ",8,ye)),e("button",{onClick:s=>N(a.id),class:"bg-red-500 hover:bg-red-400 text-white font-bold py-1 px-4 rounded-t"}," Delete ",8,fe),n.value[a.id]?(o(),l("button",{key:2,onClick:g,class:"text-3xl rounded-full h-min w-min absolute right-2"},[$(j(q),{icon:"ic:twotone-cancel"})])):z("",!0)])])]))),128))])])]))}},be={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},xe=e("h1",null,"Daftar User",-1),ge={__name:"DevUserList",setup(E){const x=S(),h=i([]),u=i([]),w=i(""),n=b("user"),y=b("currentColor");O("data_dev_users",u);const _=(c,f)=>c.filter(p=>Object.keys(p).some(g=>typeof p[g]=="string"&&p[g].toLowerCase().includes(f.toLowerCase()))),v=()=>{const c=_(h.value,w.value);u.value=c},k=async()=>{if(n.value)try{const c=await m.post("/dev_users_list",{author_level:n.value.author_level});h.value=c.data}catch(c){console.log(c)}else x.push("/")};return K(async()=>{await k(),u.value=h.value}),R(h,()=>{v()},{deep:!0}),(c,f)=>(o(),l("div",be,[xe,$(G,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:w.value,"onUpdate:modelValue":f[0]||(f[0]=p=>w.value=p),inputClass:"text-sm md:text-base",submitFunc:v,class:"m-auto my-4",style:A({borderColor:j(y)})},null,8,["modelValue","style"]),$(me)]))}};export{ge as default};
