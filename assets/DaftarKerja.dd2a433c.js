import{l as S,i as k,r as i,m as E,q,o as a,c as o,b as e,F as I,g as K,t as d,w as B,v as D,n as j,d as f,A as $,I as M,x as P,s as N,k as b,y as U,z,B as A}from"./index.85d30ed6.js";import{_ as H}from"./TextPopup.ea98a04f.js";const R={class:"my-6"},G={class:"flex flex-col justify-center m-auto overflow-auto"},J=e("thead",null,[e("tr",{class:"flex justify-around"},[e("th",{class:"w-[10vw]",scope:"col"},"Id"),e("th",{class:"w-[20vw]",scope:"col"},"Lokasi"),e("th",{class:"w-[10vw]",scope:"col"},"Layanan"),e("th",{class:"w-[10vw]",scope:"col"},"Harga"),e("th",{class:"w-[10vw]",scope:"col"},"Pemesan"),e("th",{class:"w-[20vw]",scope:"col"},"Petugas"),e("th",{class:"w-[10vw]",scope:"col"},"Deskripsi"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Pemesanan"),e("th",{class:"w-[15vw]",scope:"col"},"Estimasi Pengerjaan"),e("th",{class:"w-[15vw]",scope:"col"},"Tanggal Penyelesaian"),e("th",{class:"w-[20vw]",scope:"col"},"Actions")])],-1),Q={scope:"row",class:"w-[10vw] overflow-auto flex items-center justify-center"},W=["onClick"],X={class:"w-[20vw] overflow-auto"},Y={class:"w-[10vw] overflow-auto"},Z={class:"w-[10vw] overflow-auto"},ee={key:0},te={key:1},se={class:"w-[10vw] overflow-auto"},ae={class:"w-[20vw] overflow-auto"},oe={class:"w-[10vw] justify-center flex items-center overflow-auto"},le=["onClick"],ne={class:"w-[15vw] overflow-auto"},re={class:"w-[15vw] overflow-auto"},ce={key:0},de={key:1},ie={class:"w-[15vw] overflow-auto"},ue={class:"w-[20vw]"},ve={class:"flex gap-2 justify-center items-center"},_e=["onClick"],pe=["onClick"],we={key:2,class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t cursor-not-allowed brightness-50",disabled:""},he=["onClick"],ye={__name:"TabelKerjaan",setup(O){const C=S(),u=k("currentColor"),v=k("user"),p=k("data_myOrder"),l=i({}),w=i(""),h=i(""),x=i([]),y=i({});E("popupOpen",y);const n=async()=>{try{const s=await b.get("/get_karyawan");x.value=s.data}catch(s){console.log(s)}},g=s=>{l.value={},l.value[s.id]=!0,w.value=s.harga,h.value=s.estimasi_pengerjaan},_=()=>{l.value={}},m=async s=>{try{await b.post("/edit_my_kerja",{pesanan_id:s,harga:w.value,estimasi_pengerjaan:h.value}),await V(),l.value={}}catch(c){console.log(c)}},F=async s=>{try{await b.post("/selesai_kerja",{pesanan_id:s}),await V()}catch(c){console.log(c)}},L=s=>{y.value={},y.value[s]=!0},V=async()=>{if(v.value)try{const s=await b.post("/get_kerjaan",{user_id:v.value.id,author_level:v.value.author_level});p.value=s.data}catch(s){console.log(s)}else C.push("/")},T=s=>{navigator.clipboard.writeText(s)};return q(()=>{n()}),(s,c)=>(a(),o("div",R,[e("table",G,[J,e("tbody",null,[(a(!0),o(I,null,K(f(p),t=>(a(),o("tr",{key:t.id,class:"border-b border-gray-700 flex justify-around w-full items-center"},[e("th",Q,[e("button",{onClick:r=>T(t.id),class:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-1 px-2 rounded-t"}," Copy ",8,W)]),e("td",X,d(t.lokasi),1),e("td",Y,d(t.layanan),1),e("td",Z,[l.value[t.id]?(a(),o("div",ee,[B(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=r=>w.value=r),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:j({borderColor:f(u)})},null,4),[[D,w.value]])])):(a(),o("div",te,d(t.harga),1))]),e("td",se,d(t.pelanggan.name),1),e("td",ae,[e("div",null,d(t.karyawan.map(r=>r.name).join(", ")),1)]),e("td",oe,[e("button",{onClick:r=>L(t.id),class:"bg-violet-500 hover:bg-violet-400 text-white font-bold py-1 px-2 rounded-t"}," Deskripsi ",8,le)]),e("td",ne,d(t.tanggal_pemesanan),1),e("td",re,[l.value[t.id]?(a(),o("div",ce,[B(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=r=>h.value=r),class:"px-4 py-1 bg-white dark:bg-gray-900 rounded-md border-1",style:j({borderColor:f(u)})},null,4),[[D,h.value]])])):(a(),o("div",de,d(t.estimasi_pengerjaan),1))]),e("td",ie,d(t.tanggal_selesai),1),e("td",ue,[e("div",ve,[l.value[t.id]?(a(),o("button",{key:0,onClick:r=>m(t.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Save ",8,_e)):(a(),o("button",{key:1,onClick:r=>g(t),class:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-t"}," Edit ",8,pe)),t.tanggal_selesai?(a(),o("button",we," Selesai ")):(a(),o("button",{key:3,onClick:r=>F(t.id),class:"bg-green-500 hover:bg-green-400 text-white font-bold py-1 px-4 rounded-t"}," Selesaikan ",8,he)),l.value[t.id]?(a(),o("button",{key:4,onClick:_,class:"text-3xl rounded-full h-min w-min relative right-2"},[$(f(M),{icon:"ic:twotone-cancel"})])):P("",!0)])]),y.value[t.id]?(a(),N(H,{key:0,title:"Deskripsi",isi:t.deskripsi},null,8,["isi"])):P("",!0)]))),128))])])]))}},ge={class:"flex flex-col justify-center my-12 text-center md:text-sm text-xs"},fe=e("h1",null,"Kerjaan",-1),xe={__name:"DaftarKerja",setup(O){const C=S(),u=i([]),v=i([]),p=i(""),l=k("user"),w=k("currentColor");E("data_myOrder",v);const h=(n,g)=>n.filter(_=>Object.keys(_).some(m=>typeof _[m]=="string"&&_[m].toLowerCase().includes(g.toLowerCase()))),x=()=>{const n=h(u.value,p.value);v.value=n},y=async()=>{if(l.value)try{const n=await b.post("/get_kerjaan",{user_id:l.value.id,author_level:l.value.author_level});u.value=n.data}catch(n){console.log(n)}else C.push("/")};return U(async()=>{await y(),v.value=u.value}),z(u,()=>{x()},{deep:!0}),(n,g)=>(a(),o("div",ge,[fe,$(A,{searchClass:"w-[24rem] h-10 pl-8 pr-2 rounded-lg",modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=_=>p.value=_),inputClass:"text-sm md:text-base",submitFunc:x,class:"m-auto my-4",style:j({borderColor:f(w)})},null,8,["modelValue","style"]),$(ye)]))}};export{xe as default};
